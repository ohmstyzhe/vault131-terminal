/* =========================================================
   CRT PHOSPHOR MASK (RGB subpixel grid)
   Drop-in overlay layer
   ========================================================= */

:root{
  --maskOpacity: 0.14;        /* 0.08–0.18 sweet spot */
  --maskStrength: 1.15;       /* contrast of the mask */
  --maskSat: 1.25;            /* color punch */
  --maskScroll: 0px;          /* updated by JS (optional) */
}

/* The overlay layer itself */
.crtMask{
  position:absolute;
  inset:10px;
  border-radius: calc(var(--glassCurve) - 6px);
  pointer-events:none;

  /* Put it above content, below heavy glass/grime */
  z-index: 7;

  /* Two layers:
     1) faint horizontal “screen structure”
     2) RGB subpixel stripes (phosphor mask)
  */
  background-image:
    repeating-linear-gradient(
      to bottom,
      rgba(0,0,0,0.18) 0px,
      rgba(0,0,0,0.18) 1px,
      rgba(0,0,0,0.00) 2px,
      rgba(0,0,0,0.00) 4px
    ),
    repeating-linear-gradient(
      to right,
      rgba(255, 60, 60, 0.18) 0px,
      rgba(255, 60, 60, 0.18) 1px,
      rgba(60, 255, 140, 0.16) 1px,
      rgba(60, 255, 140, 0.16) 2px,
      rgba(60, 160, 255, 0.16) 2px,
      rgba(60, 160, 255, 0.16) 3px
    );

  /* “Pixel density” */
  background-size:
    100% 4px,    /* vertical structure */
    3px 100%;    /* RGB triplets */

  /* Scroll-reactive position (works even if JS not added) */
  background-position:
    0 calc(var(--maskScroll) * -0.35),
    0 calc(var(--maskScroll) * -0.15);

  opacity: var(--maskOpacity);

  /* This is what makes it *feel* like it affects color */
  mix-blend-mode: overlay;

  filter:
    contrast(var(--maskStrength))
    saturate(var(--maskSat))
    blur(0.15px);

  transform: translateZ(0);
}

/* Optional: soften the mask on small screens so it doesn’t moiré */
@media (max-width: 700px){
  .crtMask{
    opacity: 0.10;
    filter: contrast(1.05) saturate(1.15) blur(0.22px);
  }
}
