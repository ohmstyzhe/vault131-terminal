<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>VAULT 131 DATABASE</title>

<style>
  :root{
    --g:#4cff9a;
    --g2: rgba(76,255,154,.75);
    --bg:#050b07;
    --line: rgba(76,255,154,.25);
    --shadow: rgba(76,255,154,.25);
  }

  html,body{
    margin:0; height:100%;
    background:#000;
    font-family: ui-monospace, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
    display:flex; justify-content:center; align-items:center;
    overflow:hidden;
  }

  #crt{
    width:min(980px, 92vw);
    height:min(80vh, 820px);
    background:var(--bg);
    border-radius:22px;
    padding:34px;
    position:relative;
    overflow:hidden;
    display:flex;
    flex-direction:column;
    border:3px solid rgba(76,255,154,0.35);
    box-shadow:0 0 45px var(--shadow), inset 0 0 140px rgba(0,0,0,0.95);
  }

  /* HEADER */
  #uiWrap{ margin-bottom:10px; padding-bottom:10px; border-bottom:1px solid var(--line); }
  #uiTop{ display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap; }
  #uiBar{ color:var(--g); font-size:14px; letter-spacing:1px; }
  #uiStatus{ margin-top:6px; color:rgba(76,255,154,0.85); font-size:12px; letter-spacing:0.8px; }

  /* AUDIO BUTTON */
  #audioBtn{
    border:2px solid rgba(76,255,154,0.55);
    background:transparent;
    color:rgba(76,255,154,0.85);
    font-family:inherit;
    padding:6px 10px;
    border-radius:6px;
    cursor:pointer;
    font-size:12px;
    letter-spacing:1px;
  }
  #audioBtn.on{ border-color:var(--g); color:var(--g); }

  /* TERMINAL */
  #terminal{
    color:var(--g);
    text-shadow:0 0 4px rgba(76,255,154,0.7),0 0 10px rgba(76,255,154,0.35);
    white-space:pre-wrap;
    overflow-y:auto;
    flex:1;
    line-height:1.35;
  }

  /* INPUT */
  #inputBox{
    display:none;
    width:min(560px, 92%);
    margin-top:12px;
    background:rgba(0,0,0,0.6);
    color:var(--g);
    border:2px solid var(--g);
    padding:10px;
    border-radius:6px;
    font-size:16px;
    outline:none;
  }

  /* CURSOR */
  #cursor{
    display:inline-block;
    width:10px;
    height:1em;
    background:var(--g);
    margin-left:2px;
    animation: blink 1s infinite;
    vertical-align: -2px;
  }
  @keyframes blink{50%{opacity:0;}}

  /* SCANLINES */
  #scanlines{
    position:absolute; inset:0;
    background:repeating-linear-gradient(to bottom,
      rgba(0,0,0,.28), rgba(0,0,0,.28) 1px,
      transparent 1px, transparent 3px);
    pointer-events:none;
  }

  /* =========================
     READY HUB SCREEN (Pip-Boy-ish)
     ========================= */
  #hub{
    display:none;
    flex:1;
    position:relative;
    padding-top:10px;
  }

  .hubFrame{
    position:relative;
    height:100%;
    border:1px solid var(--line);
    border-radius:14px;
    padding:16px;
    box-shadow: inset 0 0 60px rgba(0,0,0,.75);
  }

  .hubTopTabs{
    display:flex;
    gap:14px;
    flex-wrap:wrap;
    padding-bottom:10px;
    margin-bottom:12px;
    border-bottom:1px solid var(--line);
    color:var(--g2);
    letter-spacing:1px;
    font-size:13px;
  }
  .hubTopTabs .active{ color:var(--g); }

  .hubCenter{
    position:absolute;
    left:50%; top:50%;
    transform:translate(-50%,-50%);
    width:min(210px, 44vw);
    height:min(210px, 44vw);
    border-radius:999px;
    border:2px solid rgba(76,255,154,.55);
    display:flex;
    align-items:center;
    justify-content:center;
    box-shadow:0 0 22px rgba(76,255,154,.18);
    background: rgba(0,0,0,.22);
    text-align:center;
    padding:12px;
  }

  /* ‚ÄúVault Boy‚Äù placeholder (swap with an image later) */
  .vaultBoy{
    width:74%;
    max-width:150px;
    filter: drop-shadow(0 0 10px rgba(76,255,154,.15));
    opacity:.95;
  }

  /* Buttons positioned around the center like the reference */
  .hubBtn{
    position:absolute;
    border:2px solid var(--g);
    background:transparent;
    color:var(--g);
    font-family:inherit;
    padding:10px 14px;
    border-radius:10px;
    cursor:pointer;
    letter-spacing:1px;
    font-size:13px;
    min-width:120px;
    text-align:center;
  }
  .hubBtn:hover{ box-shadow: 0 0 18px rgba(76,255,154,.18); }

  /* placements */
  #btnInfo{ left:14px; top:84px; }
  #btnDate{ right:14px; top:84px; }
  #btnStory{ left:14px; bottom:84px; }
  #btnMystery{ right:14px; bottom:84px; }

  /* Modal panel */
  #panel{
    display:none;
    position:absolute;
    inset:12px;
    background:rgba(0,0,0,.82);
    border:2px solid rgba(76,255,154,.55);
    border-radius:14px;
    padding:16px;
    box-shadow: 0 0 30px rgba(76,255,154,.12), inset 0 0 70px rgba(0,0,0,.85);
  }

  #panelHead{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
    padding-bottom:10px;
    border-bottom:1px solid var(--line);
    margin-bottom:10px;
  }

  #panelTitle{
    color:var(--g);
    letter-spacing:1px;
    font-size:14px;
  }

  #panelClose{
    border:2px solid rgba(76,255,154,.55);
    background:transparent;
    color:var(--g);
    font-family:inherit;
    padding:6px 10px;
    border-radius:8px;
    cursor:pointer;
    letter-spacing:1px;
    font-size:12px;
  }

  #panelBody{
    color:rgba(76,255,154,.92);
    font-size:13px;
    line-height:1.55;
    overflow:auto;
    height: calc(100% - 52px);
    white-space:pre-wrap;
  }

  /* small footer hint */
  .hubHint{
    position:absolute;
    left:16px;
    bottom:16px;
    color:rgba(76,255,154,.6);
    font-size:11px;
    letter-spacing:.7px;
  }
</style>
</head>

<body>
  <div id="crt">
    <div id="uiWrap">
      <div id="uiTop">
        <div id="uiBar">VAULT 131 DATABASE ‚îÇ STATUS: LOCKED</div>
        <button id="audioBtn">AUDIO: OFF</button>
      </div>
      <div id="uiStatus">STANDBY‚Ä¶ AWAITING INPUT</div>
    </div>

    <!-- Terminal mode -->
    <div id="terminal"></div>
    <input id="inputBox" autocomplete="off" />

    <!-- Ready hub mode -->
    <div id="hub">
      <div class="hubFrame">
        <div class="hubTopTabs">
          <div class="active">STAT</div>
          <div>INV</div>
          <div>DATA</div>
          <div>MAP</div>
          <div>RADIO</div>
        </div>

        <button class="hubBtn" id="btnInfo">INFO</button>
        <button class="hubBtn" id="btnDate">DATE DAY</button>
        <button class="hubBtn" id="btnStory">VAULT 131</button>
        <button class="hubBtn" id="btnMystery">???</button>

        <div class="hubCenter">
          <!-- Simple inline ‚ÄúVault Boy‚Äù placeholder as SVG -->
          <svg class="vaultBoy" viewBox="0 0 120 160" xmlns="http://www.w3.org/2000/svg">
            <g fill="none" stroke="rgba(76,255,154,.95)" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="60" cy="36" r="20"/>
              <path d="M44 38c3 6 10 10 16 10 6 0 13-4 16-10"/>
              <path d="M55 32h0M65 32h0"/>
              <path d="M60 56c18 0 30 12 30 30v34H30V86c0-18 12-30 30-30z"/>
              <path d="M46 78v14M74 78v14"/>
              <path d="M42 120v24M78 120v24"/>
              <path d="M42 144h18M60 144h18"/>
            </g>
          </svg>
        </div>

        <div class="hubHint">TIP: Tap a module to open it. (Hub locked to authorized users only.)</div>

        <div id="panel">
          <div id="panelHead">
            <div id="panelTitle">MODULE</div>
            <button id="panelClose">CLOSE</button>
          </div>
          <div id="panelBody"></div>
        </div>
      </div>
    </div>

    <div id="scanlines"></div>
  </div>

<script>
  /* ========= AUDIO (user activated) ========= */
  let audioOn = false;
  const AudioCtx = window.AudioContext || window.webkitAudioContext;
  const ctx = new AudioCtx();
  const hum = ctx.createOscillator();
  const gain = ctx.createGain();
  hum.type = "sawtooth";
  hum.frequency.value = 60;
  gain.gain.value = 0;
  hum.connect(gain);
  gain.connect(ctx.destination);
  hum.start();

  function beep(){
    if(!audioOn) return;
    const o = ctx.createOscillator(), g = ctx.createGain();
    o.connect(g); g.connect(ctx.destination);
    o.frequency.value = 880;
    g.gain.value = 0.03;
    o.start();
    o.stop(ctx.currentTime + 0.03);
  }

  const audioBtn = document.getElementById("audioBtn");
  audioBtn.onclick = async ()=>{
    await ctx.resume();
    audioOn = !audioOn;
    gain.gain.linearRampToValueAtTime(audioOn ? 0.02 : 0, ctx.currentTime + 0.25);
    audioBtn.textContent = audioOn ? "AUDIO: ON" : "AUDIO: OFF";
    audioBtn.classList.toggle("on", audioOn);
  };

  /* ========= ELEMENTS ========= */
  const uiBar = document.getElementById("uiBar");
  const uiStatus = document.getElementById("uiStatus");
  const term = document.getElementById("terminal");
  const input = document.getElementById("inputBox");

  const hub = document.getElementById("hub");
  const panel = document.getElementById("panel");
  const panelTitle = document.getElementById("panelTitle");
  const panelBody = document.getElementById("panelBody");
  const panelClose = document.getElementById("panelClose");

  const cursor = document.createElement("span");
  cursor.id="cursor";
  term.appendChild(cursor);

  /* ========= TYPEWRITER ========= */
  function type(lines, speed=32, cb){
    let i=0;
    (function next(){
      if(i>=lines.length){ cb && cb(); return; }
      const d=document.createElement("div");
      term.insertBefore(d,cursor);
      let j=0;
      (function c(){
        if(j>=lines[i].length){ i++; setTimeout(next,170); return; }
        d.textContent+=lines[i][j++];
        beep();
        term.scrollTop=term.scrollHeight;
        setTimeout(c,speed);
      })();
    })();
  }

  function clearTerminal(){
    term.innerHTML="";
    term.appendChild(cursor);
  }
  function showInput(ph){
    input.style.display="block";
    input.placeholder=ph;
    input.focus();
  }
  function hideInput(){ input.style.display="none"; }

  function setStatus(t){ uiStatus.textContent = t; }

  /* ========= CORE: ALWAYS route 14-LOVE-READY ========= */
  function normalize(s){
    return (s||"")
      .trim()
      .replace(/[‚Äì‚Äî‚àí]/g,"-")
      .replace(/\s+/g," ")
      .toUpperCase();
  }

  input.addEventListener("keydown", (e)=>{
    if(e.key !== "Enter") return;

    const v = normalize(input.value);
    input.value = "";
    hideInput();

    // ‚úÖ THIS IS THE IMPORTANT PART:
    if(v === "14-LOVE-READY"){
      showReadyHub();
      return;
    }

    // If not the code, do a Fallout-like denial loop.
    setStatus("ACCESS DENIED");
    type(["ACCESS DENIED", "> "], 26, ()=> showInput("ENTER IDENTIFICATION"));
  });

  /* ========= BOOT ========= */
  function boot(){
    hub.style.display = "none";
    term.style.display = "block";
    input.style.display = "none";

    uiBar.textContent="VAULT 131 DATABASE ‚îÇ STATUS: LOCKED";
    setStatus("STANDBY‚Ä¶ AWAITING INPUT");

    clearTerminal();
    type([
      "VAULT 131 DATABASE",
      "SECURITY: ENABLED",
      "ENTER IDENTIFICATION:",
      "> "
    ], 30, ()=> showInput("ENTER IDENTIFICATION"));
  }

  /* ========= READY HUB ========= */
  function showReadyHub(){
    // Swap views
    term.style.display = "none";
    input.style.display = "none";
    hub.style.display = "block";

    uiBar.textContent="VAULT 131 DATABASE ‚îÇ STATUS: READY";
    setStatus("AUTHORIZED MODULES LOADED");

    closePanel();
  }

  function openPanel(title, body){
    panelTitle.textContent = title;
    panelBody.textContent = body;
    panel.style.display = "block";
  }
  function closePanel(){
    panel.style.display = "none";
    panelTitle.textContent = "MODULE";
    panelBody.textContent = "";
  }
  panelClose.onclick = closePanel;

  /* ========= Hub Button Content ========= */
  const btnInfo = document.getElementById("btnInfo");
  const btnDate = document.getElementById("btnDate");
  const btnStory = document.getElementById("btnStory");
  const btnMystery = document.getElementById("btnMystery");

  btnInfo.onclick = ()=>{
    openPanel("INFO MODULE", [
      "‚Ä¢ Build Time: ~3.5 hrs (including debugging the cursed caches).",
      "‚Ä¢ Tech Notes:",
      "  - Single-file HTML/CSS/JS build (portable deployment).",
      "  - AudioContext uses user gesture resume() (mobile-safe).",
      "  - Input routing uses normalized token parsing.",
      "  - UI: CRT shader + scanlines + glow stack.",
      "",
      "‚Ä¢ Nerd Fact:",
      "  You‚Äôre basically running a tiny state machine ‚Äî your input changes what the screen *is*."
    ].join("\n"));
  };

  // Live countdown to next Feb 14 in the user‚Äôs local timezone
  let countdownTimer = null;
  function nextValentines(){
    const now = new Date();
    let y = now.getFullYear();
    let v = new Date(y, 1, 14, 0, 0, 0); // Feb = 1
    if(now > v) v = new Date(y+1, 1, 14, 0, 0, 0);
    return v;
  }
  function formatDiff(ms){
    if(ms < 0) ms = 0;
    const s = Math.floor(ms/1000);
    const d = Math.floor(s/86400);
    const h = Math.floor((s%86400)/3600);
    const m = Math.floor((s%3600)/60);
    const sec = s%60;
    return `${d}d ${h}h ${m}m ${sec}s`;
  }

  btnDate.onclick = ()=>{
    const target = nextValentines();
    openPanel("DATE DAY", "Initializing countdown‚Ä¶");
    if(countdownTimer) clearInterval(countdownTimer);

    const tick = ()=>{
      const now = new Date();
      const diff = target - now;
      panelBody.textContent =
        "VALENTINE'S DAY COUNTDOWN\n" +
        "-------------------------\n" +
        `Target: ${target.toLocaleString()}\n\n` +
        `Time Remaining: ${formatDiff(diff)}\n\n` +
        "Status: HEART SYSTEMS STANDING BY üíö";
    };

    tick();
    countdownTimer = setInterval(()=>{
      if(panel.style.display !== "block"){ clearInterval(countdownTimer); countdownTimer=null; return; }
      tick();
    }, 1000);
  };

  btnStory.onclick = ()=>{
    openPanel("VAULT 131 DATA LOG", [
      "VAULT 131 ‚Äî INTERNAL ARCHIVE (REDACTED)\n",
      "They called it a ‚Äúcomfort vault.‚Äù Not a social experiment, not a weapon lab, not a cryo tomb.",
      "Just a place where the lights stayed on and the doors stayed shut.",
      "",
      "The truth was simpler and stranger:",
      "Vault 131 was built to preserve something the wasteland couldn‚Äôt manufacture‚Äîgentleness.",
      "",
      "At orientation, every resident received two things:",
      "1) a number, and 2) a promise.",
      "The number was for the ledger.",
      "The promise was for the heart.",
      "",
      "The Overseer‚Äôs terminal held one instruction that never changed:",
      "‚ÄúKeep them kind. Keep them safe. If the world ends, let kindness survive it.‚Äù",
      "",
      "So the vault ran differently than the rest.",
      "There were drills, sure‚Äîemergency protocols, supply audits, radiation sweeps.",
      "But there were also ‚Äòsmall things‚Äô written into policy:",
      "- weekly movie nights,",
      "- shared meals,",
      "- ‚Äúsay it out loud‚Äù sessions where people confessed fears and got met with support instead of silence.",
      "",
      "And then, years later, the first crack appeared.",
      "A routine maintenance crew found an unmarked hatch behind the hydroponics wall.",
      "No documentation. No keycard requirement.",
      "Just a handprint scanner with one label:",
      "",
      "   LOVE READY",
      "",
      "The vault argued about it for weeks.",
      "Some called it a prank. Some called it a trap.",
      "But one resident‚Äîquiet, the type who listened more than they spoke‚Äîstepped forward and said:",
      "",
      "‚ÄúIf they built a vault for kindness‚Ä¶ then they built an exit for it too.‚Äù",
      "",
      "The hatch opened into a narrow corridor with old-world signage and a single working screen.",
      "The screen wasn‚Äôt a warning or a test.",
      "It was a message, looping, patient as breathing:",
      "",
      "‚ÄúWhen you find someone worth choosing‚Äîchoose them like the world depends on it.‚Äù",
      "",
      "That‚Äôs when Vault 131 changed.",
      "Not with alarms, not with violence‚Äîjust with a decision.",
      "They started writing letters in advance. They started building gifts out of scrap.",
      "They started saving the best moments like they were rations.",
      "",
      "Because they understood the experiment wasn‚Äôt the vault.",
      "The experiment was what you‚Äôd do with love when it finally had room to exist.",
      "",
      "END OF ENTRY.\n",
      "NOTE: This terminal session was preserved for one reason:",
      "to remind you that love isn‚Äôt a reward at the end of the game‚Äî",
      "it‚Äôs the mission."
    ].join("\n"));
  };

  btnMystery.onclick = ()=>{
    openPanel("??? MODULE", [
      "OPTION IDEA (you can keep or replace):",
      "",
      "‚ÄúPERK UNLOCK‚Äù ‚Äî a short mini-quiz that unlocks a sweet message.",
      "",
      "Example:",
      "‚Ä¢ Choose a perk:",
      "  - 'Wasteland Waltz' (date idea generator)",
      "  - 'Lucky Find' (hidden compliment log)",
      "  - 'Radproof' (reassurance messages)",
      "",
      "If you want, I‚Äôll turn this into a real interactive perk picker next."
    ].join("\n"));
  };

  /* start */
  boot();
</script>
</body>
</html>