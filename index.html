<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>VAULT 131 DATABASE</title>

<style>
html, body{
margin:0; height:100%; background:#000;
font-family: monospace;
display:flex; justify-content:center; align-items:center;
overflow:hidden;
}

#crt{
width:90%;
max-width:980px;
height:80vh;
background:#050b07;
border-radius:22px;
padding:34px;
position:relative;
overflow:hidden;
display:flex;
flex-direction:column;
border:3px solid rgba(76,255,154,0.35);
box-shadow:0 0 45px rgba(76,255,154,0.25), inset 0 0 140px rgba(0,0,0,0.95);
}

/* ===== HEADER ===== */
#uiWrap{
margin-bottom:10px;
padding-bottom:10px;
border-bottom:1px solid rgba(76,255,154,0.3);
}
#uiTop{
display:flex;
align-items:center;
justify-content:space-between;
gap:12px;
flex-wrap:wrap;
}
#uiBar{
color:#4cff9a;
font-size:14px;
letter-spacing:1px;
opacity:0.92;
}
#uiStatus{
margin-top:6px;
color:rgba(76,255,154,0.85);
font-size:12px;
letter-spacing:0.8px;
opacity:0.9;
}

/* ===== AUDIO BUTTON ===== */
#volBtn{
border:2px solid rgba(76,255,154,0.55);
background:transparent;
color:rgba(76,255,154,0.85);
font-family:monospace;
padding:6px 10px;
border-radius:6px;
cursor:pointer;
letter-spacing:1px;
font-size:12px;
margin:0;
}
#volBtn.on{
border-color:#4cff9a;
color:#4cff9a;
}

/* ===== TERMINAL ===== */
#terminal{
color:#4cff9a;
text-shadow:0 0 4px rgba(76,255,154,0.7),0 0 10px rgba(76,255,154,0.4);
white-space:pre-wrap;
overflow-y:auto;
flex:1;
}

/* ===== SCANLINES ===== */
#scanlines{
position:absolute; inset:0;
background:repeating-linear-gradient(to bottom,
rgba(0,0,0,.28), rgba(0,0,0,.28) 1px,
transparent 1px, transparent 3px);
pointer-events:none;
animation: scan 2s linear infinite;
}
@keyframes scan {from{background-position:0 0;}to{background-position:0 3px;}}

/* ===== INPUT ===== */
#inputBox{
display:none;
width:80%;
margin-top:10px;
background:rgba(0,0,0,0.6);
color:#4cff9a;
border:2px solid #4cff9a;
padding:10px;
border-radius:6px;
font-size:16px;
outline:none;
}

/* ===== BUTTONS / HINTS ===== */
#hintContainer{margin-top:6px;display:flex;flex-wrap:wrap;}
button{
border:2px solid #4cff9a;
background:transparent;
color:#4cff9a;
font-family:monospace;
padding:6px 12px;
margin:6px 6px 0 0;
border-radius:6px;
cursor:pointer;
}

/* ===== CURSOR ===== */
#cursor{
display:inline-block;
width:10px;
background:#4cff9a;
margin-left:2px;
animation: blink 1s infinite;
}
@keyframes blink{50%{opacity:0;}}

/* ===== LOADING ===== */
.loadTrack{
width:100%;
max-width:520px;
height:12px;
border:2px solid rgba(76,255,154,0.65);
border-radius:6px;
overflow:hidden;
margin-top:8px;
}
.loadFill{height:100%; width:0%; background:rgba(76,255,154,0.95);}
.loadMsg{margin-top:6px;opacity:.95;}
.loadDetail{margin-top:4px;opacity:.82;font-size:13px;letter-spacing:0.5px;}

/* ===== FINAL CODE ===== */
.bigCode{
font-size:56px;
letter-spacing:10px;
font-weight:700;
text-align:center;
margin-top:14px;
text-shadow:
0 0 6px rgba(76,255,154,0.9),
0 0 18px rgba(76,255,154,0.6),
0 0 32px rgba(76,255,154,0.35);
animation: codeFlash 1.1s steps(2) infinite;
}
@keyframes codeFlash{
0%{opacity:1;}
50%{opacity:.35;}
100%{opacity:1;}
}

/* ===== POWER DIP / GLITCH OVERLAY ===== */
#powerDip{
position:absolute;
inset:0;
background:radial-gradient(circle at 50% 45%,
rgba(76,255,154,0.10),
rgba(0,0,0,0.92) 60%,
rgba(0,0,0,0.98) 100%);
opacity:0;
pointer-events:none;
z-index:8;
mix-blend-mode:screen;
}
.powerDipOn{
animation: dip 420ms ease-in-out 1;
}
@keyframes dip{
0%{opacity:0; filter:brightness(1) contrast(1);}
20%{opacity:0.9; filter:brightness(0.65) contrast(1.25);}
55%{opacity:0.35; filter:brightness(0.85) contrast(1.15);}
100%{opacity:0; filter:brightness(1) contrast(1);}
}

/* ===== RAD FLICKER DURING LOADING ===== */
.radFlicker{
animation: rad 140ms steps(2) infinite;
}
@keyframes rad{
0%{filter:brightness(1) contrast(1);}
50%{filter:brightness(0.92) contrast(1.18);}
100%{filter:brightness(1) contrast(1);}
}

/* Mobile */
@media (max-width:720px){
#inputBox{width:100%;}
}
</style>
</head>

<body>
<div id="crt">
<div id="uiWrap">
<div id="uiTop">
<div id="uiBar">VAULT 131 DATABASE ‚îÇ STATUS: LOCKED</div>
<button id="volBtn" type="button">AUDIO: OFF</button>
</div>
<div id="uiStatus">STANDBY‚Ä¶ AWAITING INPUT</div>
</div>

<div id="terminal"></div>
<input id="inputBox" autocomplete="off">
<div id="hintContainer"></div>

<div id="powerDip"></div>
<div id="scanlines"></div>
</div>

<script>
/* ========= AUDIO (DO NOT START UNTIL CLICK) ========= */
let ctx = null, hum = null, gain = null;
let audioOn = false;

function ensureAudio(){
if(ctx) return;
ctx = new (window.AudioContext||window.webkitAudioContext)();
hum = ctx.createOscillator();
gain = ctx.createGain();
hum.type = "sawtooth";
hum.frequency.value = 60;
gain.gain.value = 0; // start silent
hum.connect(gain);
gain.connect(ctx.destination);
hum.start();
}

function fadeInHum(){
if(!ctx) return;
gain.gain.cancelScheduledValues(ctx.currentTime);
gain.gain.linearRampToValueAtTime(0.02, ctx.currentTime + 0.6);
}

function fadeOutHum(){
if(!ctx) return;
gain.gain.cancelScheduledValues(ctx.currentTime);
gain.gain.linearRampToValueAtTime(0.0, ctx.currentTime + 0.15);
}

function beep(){
if(!ctx || !audioOn) return;
const o = ctx.createOscillator(), g = ctx.createGain();
o.connect(g); g.connect(ctx.destination);
o.frequency.value = 880;
g.gain.value = 0.03;
o.start();
o.stop(ctx.currentTime + 0.03);
}

/* ========= ELEMENTS ========= */
const crt = document.getElementById("crt");
const uiBar = document.getElementById("uiBar");
const uiStatus = document.getElementById("uiStatus");
const term = document.getElementById("terminal");
const input = document.getElementById("inputBox");
const hints = document.getElementById("hintContainer");
const dip = document.getElementById("powerDip");
const volBtn = document.getElementById("volBtn");

/* AUDIO BUTTON */
function updateVolBtn(){
volBtn.textContent = audioOn ? "AUDIO: ON" : "AUDIO: OFF";
volBtn.classList.toggle("on", audioOn);
}
volBtn.addEventListener("click", ()=>{
ensureAudio();
if(ctx.state === "suspended") ctx.resume();

audioOn = !audioOn;
updateVolBtn();

if(audioOn){
fadeInHum();
uiStatus.textContent = "AUDIO ENABLED";
}else{
fadeOutHum();
uiStatus.textContent = "AUDIO MUTED";
}
});

/* ========= CURSOR ========= */
const cursor = document.createElement("span");
cursor.id="cursor";
term.appendChild(cursor);

/* ========= TYPEWRITER ========= */
function type(lines, speed=35, cb){
let i=0;
(function next(){
if(i>=lines.length){ cb && cb(); return; }
const d = document.createElement("div");
term.insertBefore(d, cursor);
let j=0;

// tiny ‚Äúthinking‚Äù pause before each line sometimes
const prePause = (Math.random()<0.18) ? (180 + Math.random()*240) : 0;

setTimeout(()=>{
(function c(){
if(j>=lines[i].length){
i++;
setTimeout(next, 260 + Math.random()*120);
return;
}
d.textContent += lines[i][j++];
beep();
term.scrollTop = term.scrollHeight;
setTimeout(c, speed + Math.random()*25);
})();
}, prePause);

})();
}

/* ========= UI STATES ========= */
function setLocked(){
uiBar.textContent = "VAULT 131 DATABASE ‚îÇ STATUS: LOCKED";
}
function setUnlocked(){
uiBar.textContent = "VAULT 131 DATABASE ‚îÇ STATUS: OPERATIONAL ‚îÇ USER: IZABELLA";
}
function setStatus(text){
uiStatus.textContent = text;
}

/* ========= DATA ========= */
const ID = "101-317-76";
const NEXT_ID = "14-LOVE-READY";
const FINAL_CODE = "531";

const riddles = [
{ q:"I move without legs and follow you everywhere.",
a:"shadow",
h:["You see me when light hits you.","I copy your shape perfectly.","I disappear in darkness."] },
{ q:"The more you take, the more you leave behind.",
a:"footsteps",
h:["You make me without noticing.","I mark where you‚Äôve been.","I vanish if you stop walking."] },
{ q:"I speak without a mouth and hear without ears.",
a:"echo",
h:["I repeat what you say.","I live in empty spaces.","You hear me after you call out."] },
{ q:"I‚Äôm always coming, but I never arrive.",
a:"tomorrow",
h:["You can‚Äôt hold me in your hands.","I‚Äôm always one day away.","It becomes today‚Ä¶ then it‚Äôs gone."] },
{ q:"I have keys but open no locks. I have space but no room. You can enter, but you can‚Äôt go outside. What am I?",
a:"keyboard",
h:["Think: terminal.","You‚Äôre using me right now.","Keys + space + enter = me."] }
];

const finalQ = {
q:"FINAL AUTHORIZATION REQUIRED.\n\nThis number marks the day everything changed.\nWhat is the code?",
a: FINAL_CODE,
h:["There were flowers.","You went to the beach.","Someone was running late‚Ä¶ for a good reason."]
};

const loadMsgs = [
"ACCESSING VAULT RECORDS‚Ä¶",
"DECRYPTING MEMORY SECTORS‚Ä¶",
"VERIFYING EMOTIONAL STABILITY‚Ä¶",
"CHECKING RADIATION LEVELS‚Ä¶",
"SYNCING PERSONAL DATA‚Ä¶",
"VAULT-TEC PROTOCOL ACTIVE‚Ä¶",
"AUTHORIZATION PENDING‚Ä¶",
"BUFFERING‚Ä¶ PLEASE WAIT‚Ä¶"
];

const loadDetails = [
"LINK: VAULTNET/131 :: HANDSHAKE OK",
"CACHE: REBUILDING INDEX TABLES",
"SECURITY: HASHING CREDENTIALS",
"I/O: CALIBRATING CONSOLE INPUT",
"SYS: SCANNING FOR ANOMALIES",
"MEM: FLUSHING TEMP BUFFERS",
"DATA: CHECKSUM VALIDATION PASS",
"COMMS: SIGNAL STRENGTH STABLE",
"CORE: SPINNING UP MODULES",
"VAULT-TEC: INTEGRITY 100%"
];

/* ========= STATE ========= */
let stage = "login";
let r = 0;
let hintUsed = 0;
let locked = false;

/* ========= HELPERS ========= */
function clear(){
term.innerHTML="";
term.appendChild(cursor);
}

function showInput(ph=""){
input.style.display="block";
input.placeholder=ph;
input.focus();
}

function hideInput(){
input.style.display="none";
}

function showHints(arr){
hints.innerHTML="";
for(let i=hintUsed;i<3;i++){
const b = document.createElement("button");
b.textContent = "HINT " + (i+1);
b.onclick = ()=>{
if(locked) return;
setStatus("HINT MODULE: ACTIVE");
type(["HINT: " + arr[i]], 30, ()=> setStatus("AWAITING INPUT‚Ä¶"));
hintUsed++;
showHints(arr);
};
hints.appendChild(b);
}
}

/* ========= POWER DIP ========= */
function powerDip(cb){
dip.classList.remove("powerDipOn");
// restart animation reliably
void dip.offsetWidth;
dip.classList.add("powerDipOn");
setStatus("POWER FLUCTUATION‚Ä¶ STABILIZING");
setTimeout(()=>{
setStatus("STABILITY: NOMINAL");
cb && cb();
}, 420);
}

/* ========= LOADING BAR + RAD FLICKER ========= */
function loading(cb){
locked = true;
hideInput();
hints.innerHTML = "";

setStatus("PROCESSING‚Ä¶ PLEASE WAIT");

const track = document.createElement("div");
const fill = document.createElement("div");
track.className="loadTrack";
fill.className="loadFill";
track.appendChild(fill);

const msg = document.createElement("div");
msg.className="loadMsg";

const detail = document.createElement("div");
detail.className="loadDetail";

term.insertBefore(track, cursor);
term.insertBefore(msg, cursor);
term.insertBefore(detail, cursor);

let p=0, mi=0, di=0;
msg.textContent = loadMsgs[Math.floor(Math.random()*loadMsgs.length)];
detail.textContent = loadDetails[Math.floor(Math.random()*loadDetails.length)];

// turn on rad flicker *during* loading
crt.classList.add("radFlicker");

const msgI = setInterval(()=>{
msg.textContent = loadMsgs[mi++ % loadMsgs.length];
}, 650);

const detI = setInterval(()=>{
detail.textContent = loadDetails[di++ % loadDetails.length];
}, 520);

const t = setInterval(()=>{
p += 2 + Math.floor(Math.random()*6); // 2‚Äì7
if(p>100) p=100;
fill.style.width = p + "%";
term.scrollTop = term.scrollHeight;

if(p>=100){
clearInterval(t);
clearInterval(msgI);
clearInterval(detI);

setTimeout(()=>{
track.remove(); msg.remove(); detail.remove();
locked = false;
crt.classList.remove("radFlicker");
setStatus("READY");
cb && cb();
}, 240);
}
}, 60);
}

/* ========= EASTER EGG ========= */
function showHelp(){
stage = "help";
clear();
setStatus("VAULT-TEC NOTICE");
type([
"VAULT-TEC INTERNAL MEMO // DO NOT DISTRIBUTE",
"------------------------------------------",
"",
"If you are reading this, you are doing great.",
"You are safe here.",
"",
"OPERATOR TIP:",
"- HINT buttons are limited to 3 per question.",
"- Answers are NOT case sensitive.",
"",
"To continue: press ENTER to return.",
], 30, ()=>{
showInput("PRESS ENTER");
});
}

/* ========= SCENES ========= */
function boot(){
stage="login";
r=0;
hintUsed=0;
locked=false;

setLocked();
setStatus("STANDBY‚Ä¶ AWAITING INPUT");
clear();

type([
"VAULT 131 DATABASE",
"SECURITY: ENABLED",
"ENTER IDENTIFICATION:",
"> "
], 35, ()=> showInput("ENTER ID"));
}

function askRiddle(){
if(r >= riddles.length){
stage="final";
hintUsed=0;
clear();
setStatus("FINAL AUTHORIZATION");
type([finalQ.q, "", "> "], 35, ()=>{
showInput("ENTER CODE");
showHints(finalQ.h);
setStatus("AWAITING FINAL INPUT‚Ä¶");
});
return;
}

stage="riddle";
hintUsed=0;
clear();
setStatus(`TEST MODULE ${r+1}/5 LOADED`);
type([`RIDDLE ${r+1}: ${riddles[r].q}`, "", "> "], 35, ()=>{
showInput("TYPE ANSWER");
showHints(riddles[r].h);
setStatus("AWAITING INPUT‚Ä¶");
});
}

function showReadyScene(){
stage="ready";
setUnlocked();
setStatus("NEXT ADVENTURE UNLOCKED");
clear();
type([
"ACCESS ACCEPTED.",
"",
"Izabella ‚Äî on the 14th, be ready to go out.",
"Wear something nice.",
"Do your hair and makeup.",
"",
"Expect to have some fun. üôÇ",
"",
"Press ENTER to return to main menu."
], 35, ()=>{
showInput("PRESS ENTER");
});
}

function showFinalSuccess(){
clear();
setStatus("AUTHORIZATION GRANTED");
type([
"AUTHORIZATION GRANTED.",
"",
"CASE CODE:",
""
], 35, ()=>{
const big = document.createElement("div");
big.className="bigCode";
big.textContent = FINAL_CODE;
term.insertBefore(big, cursor);
term.scrollTop = term.scrollHeight;

setTimeout(()=>{
setStatus("POST-AUTH SEQUENCE");
type([
"",
"Use it to open the briefcase on the bed.",
"",
"NEXT ACCESS UNLOCKED.",
`NEW LOGIN CODE: ${NEXT_ID}`,
"",
"To use it:",
"1) Reload this page",
"2) At the ID prompt, enter that code",
"",
"Happy Valentine‚Äôs Day, Izabella.",
"I love you so much ‚Äî I hope you enjoy today.",
], 32, ()=>{
const btn = document.createElement("button");
btn.textContent = "RETURN TO MAIN MENU";
btn.onclick = boot;
term.insertBefore(btn, cursor);
term.scrollTop = term.scrollHeight;
setStatus("SESSION COMPLETE");
});
}, 520);
});
}

/* ========= INPUT ========= */
input.addEventListener("keydown", (e)=>{
if(e.key !== "Enter") return;
if(locked) return;

const raw = input.value.trim();
const a = raw.toLowerCase();

input.value = "";
hideInput();
hints.innerHTML = "";

// HELP Easter egg anywhere
if(a === "help"){
showHelp();
return;
}

if(stage === "help"){
boot();
return;
}

if(stage === "login"){
setStatus("VALIDATING‚Ä¶");

if(a === ID.toLowerCase()){
setUnlocked();
clear();
type(["ID VERIFIED.","Welcome, Izabella.","Initializing test modules‚Ä¶"], 35, ()=>{
loading(()=> powerDip(()=> { r=0; askRiddle(); }));
});
return;
}

if(a === NEXT_ID.toLowerCase()){
showReadyScene();
return;
}

type(["‚úñ INVALID ID", "> "], 35, ()=>{
setStatus("ACCESS DENIED");
showInput("ENTER ID");
});
return;
}

if(stage === "riddle"){
if(a === riddles[r].a.toLowerCase()){
setStatus("ANSWER ACCEPTED");
type(["‚úî CORRECT."], 30, ()=>{
loading(()=> powerDip(()=>{
r++;
askRiddle();
}));
});
} else {
setStatus("ANSWER REJECTED");
type(["‚úñ TRY AGAIN", "> "], 30, ()=>{
showInput("TYPE ANSWER");
showHints(riddles[r].h);
setStatus("AWAITING INPUT‚Ä¶");
});
}
return;
}

if(stage === "final"){
if(raw === finalQ.a){
setStatus("CODE ACCEPTED");
type(["‚úî AUTHORIZED."], 30, ()=>{
loading(()=> powerDip(()=> showFinalSuccess()));
});
} else {
setStatus("CODE INVALID");
type(["‚úñ INCORRECT CODE", "> "], 30, ()=>{
showInput("ENTER CODE");
showHints(finalQ.h);
setStatus("AWAITING FINAL INPUT‚Ä¶");
});
}
return;
}

if(stage === "ready"){
boot();
return;
}
});

/* Start */
updateVolBtn();
boot();
</script>
<script src="modules/app.js"></script>
</body>
</html>
